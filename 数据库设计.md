## 数据库设计

### 用户表 user

| 字段名   | 类型 | 含义     |
| -------- | ---- | -------- |
| id       |      | 用户ID   |
| uuid     | int  | 微信UUID |
| nickname | int  | 昵称     |
| sex      | int  | 性别     |
| city     |      | 所在城市 |

### 上下文记录表 context
| 字段名 | 类型 | 含义                              |
| ------ | ---- | --------------------------------- |
| id     |      |                                   |
| uid    | int  | 用户ID                            |
| status | int  | 上下文状态：0-无上下文 1-有上下文 |
| type   | int  | 上下文类型：                      |
|        |      |

### 事件表 event
| 字段名       | 类型     | 含义                                                         |
| ------------ | -------- | ------------------------------------------------------------ |
| id           | int      | 事件ID                                                       |
| name         | varchar  | 事件名称：天气预报、NBA、晚安、日计划、月计划、年计划、周期的提醒 |
| trigger_time | datetime | 触发时间                                                     |
| param        | varchar  | 事件参数json（天气城市之类）                                 |
|              |          |                                                              |

### 订阅表 subscribe
| 字段名 | 类型    | 含义                                          |
| ------ | ------- | --------------------------------------------- |
| id     | int     | 自增ID                                        |
| uid    | int     | 用户ID                                        |
| event  | varchar | 订阅事件                                      |
| param  | varchar | 事件参数json（天气城市、计划内容、提醒内容 ） |
|        |         |                                               |

### 定时任务表 job（单次）

| 字段名       | 类型     | 含义                  |
| ------------ | -------- | --------------------- |
| id           |          |                       |
| uid          | int      | 用户ID                |
| event        | varchar  | 事件                  |
| trigger_time | datetime | 触发时间              |
| status       | int      | 状态：0-未完成 1-完成 |

### 聊天记录 chat_history
